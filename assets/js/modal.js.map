{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/js/modal.dev.js"],"names":["$","wpr_cart_items","ajax","method","url","pgfy_ajax_modal","data","action","nonce","done","localStorage","setItem","document","body","on","fn","wprModal","options","settings","extend","that","overlay","opneModal","scrollbarWidth","window","innerWidth","documentElement","clientWidth","addClass","css","prepend","setTimeout","closeModal","removeClass","remove","find","click","e","target","buttonInfo","button","closest","length","buttonId","modalId","$recommendProductsWrapper","recommendProducts","split","map","Number","addedProducts","getItem","filter","id","indexOf","recommended_items","html","jQuery"],"mappings":"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","file":"modal.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./assets/js/modal.dev.js\");\n","/**\n * jQuery wpr Modal\n */\n\n;(function ( $ ) {\n    //setup cart items in localstorage to exclude from recommendation\n    function wpr_cart_items() {\n        $.ajax({\n            method: 'GET',\n            url: pgfy_ajax_modal.url,\n            data: {\n                action: 'pgfy_get_cart_items',\n                nonce: pgfy_ajax_modal.nonce\n            }\n        }).done(data => {\n            localStorage.setItem('wpr_cart_items', data);\n        });\n    }\n\n    wpr_cart_items();\n\n    $( document.body ).on( 'added_to_cart removed_from_cart wc_fragments_refreshed', 'wpr_cart_items');\n    \n\n    //modal plugin\n    $.fn.wprModal = (options) => {\n\n        var settings = $.extend({\n            action: 'open' // opton for modal open or close default: open\n        }, options );\n\n        var that = this;\n\n\n        // modal overlay\n        var overlay = $('<div class=\"wpr-modal-overlay show\"></div>');\n\n        // opne modal\n        function opneModal() {\n        \tvar scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;\n\n\t\t\tthat.addClass('show');\n\n\t\t\t$('body').css('paddingRight', scrollbarWidth);\n\n\t\t\t$('body').addClass('wpr-modal-opened').prepend(overlay);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthat.addClass('fadeIn');\n\t\t\t\toverlay.addClass('fadeIn');\n\t\t\t}, 10);\n\n\t\t\treturn false;\n        }\n\n        // close modal\n        function closeModal() {\n        \tthat.removeClass('fadeIn');\n        \t$('.wpr-modal-overlay').addClass('fadeIn');\n\n        \tsetTimeout(() => {\n\t\t\t\tthat.removeClass('show');\n\t\t\t\t$('.wpr-modal-overlay').remove();\n\t\t\t\t$('body').css('paddingRight', 0);\n\t\t\t\t$('body').removeClass('wpr-modal-opened');\n\t\t\t}, 200);\n        }\n\n\n        // call modal open\n        if(settings.action === 'open') {\n        \topneModal();\n        }\n\n        // call modal close\n        if(settings.action === 'close') {\n        \tcloseModal();\n        }\n\n        that.find('.wpr-modal-close, .wpr-close-modal').click((e) => {\n            closeModal();\n            return false;\n        });\n\n        $('.wpr-modal').click((e) => {\n        \tif(this === e.target) {\n        \t\tcloseModal();\n        \t}\n        });\n\n    };\n\n    // call modal\n    $( document.body).on('added_to_cart', (e, ...data) => {\n \n        const [,,buttonInfo] = data;\n        var button =  buttonInfo[0];\n\n      \n        //don't show modal inside modal\n        if(! $(button).closest('.recommended-product-list').length) {\n\n            var buttonId = $(button).data('product_id');\n            var modalId = '#wpr-modal-' + buttonId;\n    \n            if($(modalId).length) {\n                var $recommendProductsWrapper = $(modalId).find('.recommend-products-wrapper');\n\n                var recommendProducts = $recommendProductsWrapper.data('recommend-ids');\n                if(recommendProducts) {\n                    recommendProducts = recommendProducts.split(',').map(Number);\n                }\n\n                var addedProducts = localStorage.getItem('wpr_cart_items');\n                if(addedProducts) {\n                    addedProducts = addedProducts.split(',').map(Number);\n                    recommendProducts = recommendProducts.filter(id => addedProducts.indexOf( id ) < 0);\n                }\n\n                // return if all recommend product are already in cart\n                if(!recommendProducts.length) return;\n                $(modalId).wprModal();\n            \n                $.ajax({\n                    method: 'GET',\n                    url: pgfy_ajax_modal.url,\n                    data: {\n                        action: 'fetch_modal_products',\n                        nonce: pgfy_ajax_modal.nonce,\n                        recommended_items: recommendProducts\n                    }\n                }).done((data) => {\n                    $recommendProductsWrapper.html(data);\n                });\n            }\n        }\n    });\n\n}( jQuery ));\n\n"],"sourceRoot":""}