/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./assets/js/modal.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./assets/js/modal.js":
/*!****************************!*\
  !*** ./assets/js/modal.js ***!
  \****************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/asyncToGenerator.js");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);



(function ($, __) {
  //modal plugin
  $.fn.lprModal = function (options) {
    var settings = $.extend({
      action: "open"
    }, options);
    var that = this; // modal overlay

    var overlay = $('<div class="lpr-modal-overlay show"></div>'); // open modal

    function openModal() {
      $('body').trigger('before_open_lpr_modal'); // event before modal open

      var scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;
      that.addClass("show");
      $("body").css("paddingRight", scrollbarWidth);
      $("body").addClass("lpr-modal-opened").prepend(overlay);
      setTimeout(function () {
        that.addClass("fadeIn");
        overlay.addClass("fadeIn");
      }, 10);
      return false;
    } // close modal


    function closeModal() {
      that.removeClass("fadeIn");
      $(".lpr-modal-overlay").addClass("fadeIn");
      setTimeout(function () {
        that.removeClass("show");
        $(".lpr-modal-overlay").remove();
        $("body").css("paddingRight", 0);
        $("body").removeClass("lpr-modal-opened");
      }, 200);
      $('body').trigger('after_close_lpr_modal'); //event after modal close
    } // call modal open


    if (settings.action === "open") {
      openModal();
    } // call modal close


    if (settings.action === "close") {
      closeModal();
    }

    that.find(".lpr-modal-close, .lpr-close-modal").click(function (e) {
      closeModal();
      return false;
    });
    $(".lpr-modal").click(function (e) {
      if (this === e.target) {
        closeModal();
      }
    });
  };

  $(function () {
    // call modal
    $(document.body).on("added_to_cart",
    /*#__PURE__*/
    function () {
      var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(
      /*#__PURE__*/
      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(e) {
        var _len,
            data,
            _key,
            buttonInfo,
            button,
            addedProductId,
            modal,
            $modalWrapper,
            windowWidth,
            $carouselWrapper,
            slideItems,
            _lc_slider_setting,
            autoPlay,
            autoPlaySpeed,
            columnGap,
            isLoop,
            slideBy,
            smartSpeed,
            nextNavIcon,
            prevNavIcon,
            smItems,
            lgItems,
            mdItems,
            isNav,
            $carousel,
            $productHeading,
            notificationText,
            topPosition,
            $notification_bar,
            _args = arguments;

        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                for (_len = _args.length, data = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
                  data[_key - 1] = _args[_key];
                }

                buttonInfo = data[2];
                button = buttonInfo[0];
                addedProductId = $(button).data("product_id"); //if don't find product id from button data

                if (!addedProductId && $(button).closest('form').length) {
                  addedProductId = $(button).closest('form').find('[name="add-to-cart"]').val();
                } //don't show modal inside modal


                if ($(button).closest(".recommended-products-wrapper").length) {
                  _context.next = 18;
                  break;
                }

                //hide existing popup, quick view etc
                $('body, .quickview-wrapper .closeqv, .yith-quick-view-overlay, .mfp-wrap, .owp-qv-overlay, .owp-qv-close').click();
                _context.prev = 7;
                _context.next = 10;
                return $.get(lc_ajax_modal.url, {
                  action: "get_popup_data",
                  nonce: lc_ajax_modal.nonce,
                  product_id: addedProductId
                });

              case 10:
                modal = _context.sent;

                if (modal) {
                  $modalWrapper = $('#lpr-modal-content');
                  $modalWrapper.html(modal);

                  if (lc_ajax_modal.layout_type === "slider") {
                    windowWidth = window.innerWidth;
                    $carouselWrapper = $modalWrapper.find(".recommended-products-slider");
                    slideItems = $carouselWrapper.find('.single-lpr').length;
                    _lc_slider_setting = lc_slider_setting, autoPlay = _lc_slider_setting.autoPlay, autoPlaySpeed = _lc_slider_setting.autoPlaySpeed, columnGap = _lc_slider_setting.columnGap, isLoop = _lc_slider_setting.isLoop, slideBy = _lc_slider_setting.slideBy, smartSpeed = _lc_slider_setting.smartSpeed, nextNavIcon = _lc_slider_setting.nextNavIcon, prevNavIcon = _lc_slider_setting.prevNavIcon, smItems = _lc_slider_setting.smItems, lgItems = _lc_slider_setting.lgItems, mdItems = _lc_slider_setting.mdItems;
                    isNav = true;

                    if (slideItems <= lgItems) {
                      isNav = false;
                      isLoop = false;
                    }

                    if (windowWidth < 992 && slideItems <= mdItems) {
                      isNav = false;
                      isLoop = false;
                    }

                    if (windowWidth < 768 && slideItems <= smItems) {
                      isNav = false;
                      isLoop = false;
                    }

                    $carousel = $modalWrapper.find(".recommended-products-slider").owlCarousel({
                      autoplayHoverPause: true,
                      navElement: 'div',
                      mouseDrag: false,
                      autoplay: autoPlay,
                      autoplayTimeout: parseInt(autoPlaySpeed),
                      margin: parseInt(columnGap),
                      loop: isLoop,
                      items: smItems,
                      slideBy: slideBy,
                      smartSpeed: parseInt(smartSpeed),
                      navText: [prevNavIcon, nextNavIcon],
                      nav: true,
                      responsive: {
                        768: {
                          items: mdItems
                        },
                        992: {
                          items: lgItems
                        }
                      },
                      onInitialize: function onInitialize() {
                        $('#lpr-modal').lprModal();
                      }
                    }); //$(document.body).on('after_close_lpr_modal', $carousel.trigger('destroy.owl.carousel'));
                  } else {
                    $('#lpr-modal').lprModal();
                  }

                  setTimeout(function () {
                    //message animation
                    $modalWrapper.find('.message-text').addClass('lpr__animated animate__lpr_headShake');
                  }, 200);
                  setTimeout(function () {
                    //message animation
                    $modalWrapper.find('.message-text').addClass('lpr__animated animate__lpr_headShake');
                  }, 200); //variable product swatch

                  setTimeout(function () {
                    $('.lpr-modal .variations_form').each(function () {
                      $(this).wc_variation_form();
                    }); // woodmart theme variation swatch

                    if (window.woodmartThemeModule && woodmartThemeModule.swatchesVariations) {
                      woodmartThemeModule.swatchesVariations();
                    }

                    $modalWrapper.find('.modal-heading').addClass('lpr__animated animate__lpr_headShake');
                    $modalWrapper.find('.modal-heading-article').addClass('lpr__animated animate__lpr_headShake');
                  }, 700);
                }

                _context.next = 16;
                break;

              case 14:
                _context.prev = 14;
                _context.t0 = _context["catch"](7);

              case 16:
                _context.next = 26;
                break;

              case 18:
                $productHeading = $(button).closest('.single-lpr').find('.woocommerce-loop-product__title'); //show notification for added product.
                //fix for woodmart theme

                if (window.woodmartThemeModule) {
                  $productHeading = $(button).closest('.single-lpr').find('.wd-entities-title a:last-child');
                } //fix for oceanwp theme


                if (window.oceanwp) {
                  $productHeading = $(button).closest('.single-lpr').find('li.title a');
                }

                notificationText = $productHeading.length ? "".concat($productHeading.text(), " ").concat(__('has been added to cart.', 'leo-product-recommendations')) : __('Item has been added to cart.', 'leo-product-recommendations');
                topPosition = $(button).closest('.lpr-modal').find('.lpr-message').outerHeight();
                $notification_bar = $(button).closest('.lpr-modal').find('.lpr-purchase-notification');
                $notification_bar.css('top', topPosition).fadeIn(300).text(notificationText);
                setTimeout(function () {
                  $notification_bar.fadeOut(600);
                }, 1500);

              case 26:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, null, [[7, 14]]);
      }));

      return function (_x) {
        return _ref.apply(this, arguments);
      };
    }());
  });
})(jQuery, wp.i18n.__);

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/asyncToGenerator.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/asyncToGenerator.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}

module.exports = _asyncToGenerator;

/***/ }),

/***/ "@babel/runtime/regenerator":
/*!*************************************!*\
  !*** external "regeneratorRuntime" ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports) {

(function() { module.exports = window["regeneratorRuntime"]; }());

/***/ })

/******/ });
//# sourceMappingURL=modal.min.js.map